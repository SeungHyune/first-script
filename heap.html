<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Max Heap</title>
</head>
<body>
    <script>
        class MaxHeap {
            constructor() {
                this.heap = [null];
            }

            push(value) {
                this.heap.push(value);
                let currentIndex = this.heap.length - 1;
                let parentIndex = Math.floor(currentIndex / 2);
                
                while(parentIndex !== 0 && this.heap[parentIndex] < value) {
                    const temp = this.heap[parentIndex];
                    this.heap[parentIndex] = value;
                    this.heap[currentIndex] = temp;

                    currentIndex = parentIndex;
                    parentIndex = Math.floor(currentIndex / 2);
                }
            }

            pop() {
                const value = this.heap[1];
                this.heap[1] = this.heap.pop();

                let currentIndex = 1;
                let leftChild = currentIndex * 2;
                let rightChild = currentIndex * 2 + 1;
                while(this.heap[currentIndex] < this.heap[leftChild] 
                || this.heap[currentIndex] < this.heap[rightChild]) {
                    const temp = this.heap[currentIndex];
                    if(this.heap[leftChild] < this.heap[rightChild]) {
                        this.heap[currentIndex] = this.heap[rightChild];
                        this.heap[rightChild] = temp;
                        currentIndex = rightChild;
                    } else {
                        this.heap[currentIndex] = this.heap[leftChild];
                        this.heap[leftChild] = temp;
                        currentIndex = leftChild;
                    }

                    leftChild = currentIndex * 2;
                    rightChild = currentIndex * 2 + 1;
                }
                return value;
            }
        }

        const heap = new MaxHeap();
        heap.push(1);
        heap.push(5);
        heap.push(10);
        heap.push(15);
        heap.push(3);
        console.log(heap);

        class MinHeap {
            constructor() {
                this.heap = [null];
            }

            push(value) {
                this.heap.push(value);
                let currentIndex = this.heap.length - 1;
                let parentIndex = Math.floor(currentIndex / 2);

                while(parentIndex !== 0 && this.heap[parentIndex] > value) {
                    const temp = this.heap[parentIndex];
                    this.heap[parentIndex] = value;
                    this.heap[currentIndex] = temp;

                    currentIndex = parentIndex;
                    parentIndex = Math.floor(currentIndex / 2);
                }
            }

            pop() {
                const value = this.heap[1];
                this.heap[1] = this.heap.pop();

                let currentIndex = 1;
                let leftChild = currentIndex * 2;
                let rightChild = currentIndex * 2 + 1;
            
                while(this.heap[currentIndex] > this.heap[leftChild] 
                || this.heap[currentIndex] > this.heap[rightChild]) {
                    const temp = this.heap[currentIndex];
                    if(this.heap[leftChild] > this.heap[rightChild]) {
                        this.heap[currentIndex] = this.heap[rightChild];
                        this.heap[rightChild] = temp;
                        currentIndex = rightChild;
                    } else {
                        this.heap[currentIndex] = this.heap[leftChild];
                        this.heap[leftChild] = temp;
                        currentIndex = leftChild;
                    }

                    leftChild = currentIndex * 2;
                    rightChild = currentIndex * 2 + 1;
                }
                return value;
            }
        }

        const minHeap = new MinHeap();
        minHeap.push(10);
        minHeap.push(20);
        minHeap.push(5);
        minHeap.push(3);
        console.log(minHeap)
    </script>
</body>
</html>