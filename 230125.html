<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="utf-8">

    <title>Number guessing game</title>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <style>
      html {
        font-family: sans-serif;
      }

      body {
        width: 50%;
        max-width: 800px;
        min-width: 480px;
        margin: 0 auto;
      }
      
      .form input[type="number"] {
        width: 200px;
      }

      .lastResult {
        color: white;
        padding: 3px;
      }
    </style>
  </head>

  <body>
    <h1>Number guessing game</h1>

    <p>We have selected a random number between 1 and 100. See if you can guess it in 10 turns or fewer. We'll tell you if your guess was too high or too low.</p>

    <div class="form">
      <label for="guessField">Enter a guess: </label>
      <input type="number" min="1" max="100" required id="guessField" class="guessField">
      <input type="submit" value="Submit guess" class="guessSubmit">
    </div>

    <div class="resultParas">
      <p class="guesses"></p>
      <p class="lastResult"></p>
      <p class="lowOrHi"></p>
    </div>

    <script>
        // javascript 버전

        let randomNumber = Math.floor(Math.random() * 100) + 1;
        console.log(randomNumber)
        
        const guesses = document.querySelector('.guesses');
        const lastResult = document.querySelector('.lastResult');
        const lowOrHi = document.querySelector('.lowOrHi');

        const guessSubmit = document.querySelector('.guessSubmit');
        const guessField = document.querySelector('.guessField');

        let answer = 0;
        let guess;

        let btn = document.createElement('button');

        guessSubmit.addEventListener('click', function(e){
            guess = Number(guessField.value);
            //let span = document.createElement('span', guess);

            if(answer < 10){
                
                if(0 < guess && guess <= 100){
                    if(answer === 0){
                      guesses.textContent = 'Previous guesses:' + ' '
                    }

                    if(randomNumber > guess){
                      lastResult.style = 'background:red';
                      lastResult.innerHTML = 'Wrong!';
                      lowOrHi.innerHTML = 'Last guess was too low!';
                    } else if(randomNumber === guess){
                      lastResult.textContent = '정답입니다.';
                      lastResult.style = 'background:green';
                      guessField.disabled = true;
                      guessSubmit.disabled = true;

                      resetBtn();
                    } else if(randomNumber < guess){
                      lastResult.style = 'background:red';
                      lastResult.innerHTML = 'Wrong!';
                      lowOrHi.innerHTML = 'Last guess was too high!';
                    }
                    guesses.append(guess + ' ');
                    guessField.value = '';
                    guessField.focus();
                    answer++;
                } else{
                    alert('1~100까지 입력 가능합니다.');
                    guessField.value = "";
                }
            }else{ 
                alert('정답은 10번까지 가능합니다.');
                guessField.disabled = 'true';
                guessSubmit.disabled = 'true';

                resetBtn();
            }
        })

        function resetBtn(){
          btn.innerHTML = 'Reset Game Start !!';
          document.body.appendChild(btn).addEventListener('click', function(){
            resetGame();
          });

          
        }

        function resetGame(){
          randomNumber = Math.floor(Math.random() * 100) + 1;
          console.log(randomNumber);

          guessField.disabled = false;
          guessSubmit.disabled = false;
          guesses.innerHTML = '';
          lastResult.style = '';
          lastResult.innerHTML = '';
          lowOrHi.textContent = '';

          btn.remove();
        }

      
      // jquery 버전
      
        // let correct = Math.floor(Math.random() * 100) + 1;
        // console.log(correct)
        // let guess = null;
        // let answer = 0;
        // $('.guessSubmit').on('click', function(e){
            
        //     if(answer < 10){
        //         answer++
        //         guess = $('#guessField').val();
        //         let span = `<span style="margin-right:10px">${guess}</span>`;
        //         if(0 < guess && guess <= 100){
        //             $('.guesses').append(span);
        //             $('#guessField').val('');
        //             if(correct < guess){
        //                 $('.lowOrHi').text(`숫자가 너무 큽니다.`)
        //                 $('.lastResult').text('Wrong!').css('background', 'red')
        //             } else if(correct > guess){
        //                 $('.lowOrHi').text('숫자가 너무 작습니다.')
        //                 $('.lastResult').text('Wrong!').css('background', 'red')
        //             } else if(correct == guess){
        //                 $('.lowOrHi').text('');
        //                 $('.lastResult').text('Congratulations! You got it right!').css('background', 'green');
        //                 $('.guessSubmit').attr('disabled', true);
        //                 $('.guessField').attr('disabled', true);
        //                 $('body').append(`<button class="answer-btn">Reset</button>`);
        //                 $(document).on('click', '.answer-btn', function(){
        //                     resetGame()
        //                 });
        //             }
        //         } else {
        //             alert('1~100까지의 숫자만 입력 가능합니다.')
        //         }
        //     } else {
        //         $('.lastResult').text('!!!GAME OVER!!!').css('background', 'red');
        //         $('.guessSubmit').attr('disabled', true);
        //         $('.guessField').attr('disabled', true);
        //         $('body').append(`<button class="answer-btn">Reset</button>`);
        //         $(document).on('click', '.answer-btn', function(){
        //             resetGame()
        //         });
        //     }
        // })
        
        // function resetGame(){
        //     answer = 0;
        //     guess = null;
        //     correct = Math.floor(Math.random() * 100) + 1;
            
        //     $('.guesses').html('');
        //     $('.lastResult').text('').css('background', 'transparent');
        //     $('.guessSubmit').attr('disabled', false);
        //     $('.guessField').attr('disabled', false);
        //     $('.answer-btn').remove();
        //     console.log(`질문수 : ${answer}`, `입력값 : ${guess}`, `정답 : ${correct}`)
        // }
    </script>
  </body>
</html>